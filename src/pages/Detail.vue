<template>
    <div class="detail">
        <header class="header-detail">
            <div>
                <h1>A Walk with the Voices</h1>
                <p>By Michael Luo</p>
            </div>
            <span>Scroll to begin</span>
        </header>
        <div ref="progressMenu" class="hidden">
            <span>Short Story</span>
            <h1>A Walk with the Voices</h1>
            <p>By Michael Luo</p>
            <div>
                <div></div>
            </div>
            <button ref="schemeToggle" value="scheme">
                <svg style="height: 22px; width: 22px;" x="0px" y="0px" viewBox="0 0 37.1 43" xml:space="preserve">
                    <path fill="currentColor"
                        d="M18.9,38.8c-9.4,0-17-7.7-17-17.1s7.6-17.1,17-17.1S36,12.4,36,21.7S28.4,38.8,18.9,38.8z M18.9,5.6 C10,5.6,2.8,12.9,2.8,21.7S10,37.8,18.9,37.8S35,30.6,35,21.7S27.6,5.6,18.9,5.6z">
                    </path>
                    <rect fill="currentColor" x="19.9" y="5.6" width="0.9" height="32.8"></rect>
                    <path fill="currentColor" d="M4.1,21.9c0,8.1,6.5,14.6,14.6,14.7V7.2C10.9,7.1,4.1,13.7,4.1,21.9z"></path>
                </svg>
            </button>
        </div>
        <main>
            <article ref="article">
                <header>
                    <h1>A Walk with the Voices</h1>
                    <p>By Michael Luo</p>
                </header>

                <p>Far above, Udyr heard the cries of an eagle riding the gale. Its voice was strong,
                    confident, but not close enough to get in the way of his own thoughts. It was a relief to feel this
                    human. </p>
                <p>The voices were never silent, but Udyr knew not to be ungrateful. Even a moment’s
                    reprieve was rare.</p>
                <p><i>I can hear myself breathe… for now, at least.</i></p>
                <p>Today, he walked alone. He hiked up the mountain slopes, a chill wind following him,
                    carrying away his lingering memory of Ionia’s ethereal beauty with every gust. The monks at Hirana
                    had offered him a parting gift a few moons past when he left their lands—a riddle intended to guide
                    him on his path to mastering his spiritual powers.</p>
                <p></p>
                <p><span><i>Below winter’s peak</i></span></p>
                <p></p>
                <p></p>
                <p><span><i>Nature’s pure life essence flows</i></span></p>
                <p></p>
                <p></p>
                <p><span><i>Now transformed to glass</i></span></p>
                <p></p>
                <p>It read more beautifully in their tongue than his own, but it had not taken him long
                    to solve. After spending months traveling with the blind monk, Udyr had learned to decipher the
                    meaning behind Ionian speech.</p>
                <p>Reaching the precipitous eastern slopes of Winterspike, Udyr paused to gaze out at the
                    lake before him, frozen in all its majesty. At the edges of the lake laid the bones and corpses of
                    wild beasts, as well as those of dead shamans and priests who had come to this place, months, years,
                    and lifetimes before him.</p>
                <p>Udyr stood still, his chest bare, eyes closed, bracing against the brisk morning air.
                </p>
                <p><i>This land was my home…</i></p>
                <p>He looked down at his reflection on the ice. It showed the face of a man, ragged and
                    worn from his travels. </p>
                <p><i>My rest ends. I hear them coming.</i></p>
                <p>The ice stirred. A crack at first, as Udyr saw his image splinter into disparate
                    pieces. Soon, entire slabs broke off, drifting apart. Udyr waited, respectfully. </p>
                <p>The frigid water bubbled. Slowly to begin with, and then rapidly all at once. Steam
                    rose from the surface, filling the air with heat.</p>
                <p>Udyr took in a quiet breath, his shoulders rising, to ready himself.</p>
                <p>Out of the mist leapt an ice-formed beast, carved by the land’s magic and birthed from
                    the lake. The ground trembled as it took a thundering step toward Udyr. </p>
                <p>Udyr looked up at the wild spirit towering above him, three times his height.</p>
                <p>The murmurs started low, soft—leaves falling on fresh snow. Yet quickly, they grew.
                </p>
                <p>Bitter. Restless. </p>
                <p><i>There they are.</i></p>
                <p>Grunts turned into snarls, mutters into barks, one swallowing another. Their rage
                    seized his mind, shattering his every thought. At first, the voices competed for dominance—elnüks,
                    drüvasks, and others. Udyr had heard these voices within himself many times. Soon, they joined
                    together, into the shape he had most feared. </p>
                <p>The ravenous tiger.</p>
                <p><i>“Spirit walker. Step closer,”</i> it growled. <i>“Raise your voice and show us why
                        you have returned.”</i></p>
                <p>Udyr only just mustered the strength to stifle a gasp. His knees buckled under the
                    weight of the noise in his head. His hands shot toward the soil to steady his body. Straining his
                    neck, he glared up at the savage creature, not willing to answer.</p>
                <p>The voices rose at the sight of Udyr’s inaction, with the tiger roaring above the
                    rest. </p>
                <p><i>“You do not deserve to call the Freljord home. You are weak.”</i></p>
                <p>Udyr braced himself as the spirit rammed its head into him, shards of its icy body
                    cutting into his skin. Tumbling far across the ground, Udyr landed against hard rock.</p>
                <p><i>I must not give in.</i></p>
                <p>Regaining his balance, he wiped the blood off his face and forced his hands into
                    fists. He punched his knuckles into the frosty ground, and the throbbing in his arms overtook him.
                    Veins pulsated from his hands to his shoulders. Getting back to his feet, Udyr readied himself to
                    deflect another blow.</p>
                <p>The spirit roared once more. <i>“The strong fight! Instead, you stifle your voice and
                        cower!”</i></p>
                <p>The spirit charged headfirst. Udyr tried dodging out of the way, but his foe was
                    quicker and stronger. As he rolled to the side, the tiger swiped his leg with its claws, spraying
                    the spirit walker’s blood across the frosted ground. </p>
                <p>Udyr knelt on one knee in pain. He felt his own anger building, but still he held
                    back.</p>
                <p><i>I must not give in.</i></p>
                <p>The spirit loomed closer, letting out a feral cry before pouncing toward Udyr.
                    Realizing he could not dodge in time, he crossed his arms before him and clenched his fists. Magical
                    energy surrounded him, blocking the tiger spirit’s lethal blow. </p>
                <p>The spirit slid backward. After regaining its footing, it grinned through its fangs.
                    Its icy body crackled with vicious energy, splintering the bones of its past victims beneath its
                    feet. Death was all this place knew. </p>
                <p>Udyr knelt on both knees now, his head down, his body pounding with pain while the
                    spirit paced around him. He felt the ground shake with its every step.</p>
                <p><i>This is not the way.</i></p>
                <p>He gritted his teeth, their points drawing blood from his lips as he felt the ground
                    tremble once more. </p>
                <p>The voices boomed. <i>“The weak… are prey!”</i></p>
                <p>Udyr looked up, seeing the spirit charge toward him, its eyes lusting for blood—so
                    wide he could see himself staring back, with the same lust for violence.</p>
                <p><i>I must embrace who I am.</i></p>
                <p>Golden flames erupted from Udyr’s skin like wildfire, the anger coursing through his
                    body matching the fury of the tiger spirit before him.</p>
                <p><i>“Finally, the prey has decided to fight!”</i></p>
                <p>Udyr roared as he rushed straight at the tiger spirit. Vaulting onto the beast’s leg,
                    he climbed its craggy surface, smashing his bleeding hands into whatever piece of ice he could to
                    pull himself upward. The creature shook, the sharp edges of its body piercing the spirit walker’s
                    skin. Udyr screamed, relishing in his might. At last, his wrath matched the fire in his foe, as the
                    two reveled in their savage violence.</p>
                <p>With a brutal lunge, he reached the spirit’s back, trails of his blood dripping down
                    its sides. Spirit energy surged through him, a force strong enough to drown out any pain. The voices
                    of wild beasts clamored unchecked in his mind—the bitter cries of those consumed by the tiger, and
                    his own unbridled anger—merging as one. </p>
                <p>“I am no prey!”</p>
                <p>Udyr brought his fists down in a flurry of explosive blows, creating a web of cracks
                    running down the creature’s body. He clawed and slashed with abandon, tearing away at his foe.
                    Howling in pure rage, he threw back his head and sank his fangs deep into the spirit’s neck.</p>
                <p>He expected the spirit to tumble over, its body to break apart, giant lumps of ice
                    disappearing to dust.</p>
                <p>But it was already gone, along with its voices. Had they shrieked? Had they cried?
                </p>
                <p>High above, he heard the eagle call.</p>
                <p><i>Focus. Calm.</i></p>
                <p>Udyr fell and staggered onto solid ground. Breathing heavily, he lay next to the lake,
                    and watched the last of his enemy vanish. Suddenly, he heard another rumbling and stumbled to his
                    feet. The lake, as if celebrating his victory, began to thaw. Piece by piece, the remaining ice
                    melted, raising the water level to wash over the cold, hard land. </p>
                <p>Remembering the ritual he had repeated countless times at Hirana, Udyr limped forth.
                    Cupping his hands, he splashed cool water across his head, shoulders, and back, rinsing his wounds
                    clean. Then, gently, he took a drink.</p>
                <p>He stared at his reflection, seeing a man looking back. Wounded, tested, alive.</p>
                <p><i>I am who I am.</i></p>
                <p>Udyr heard only the sound of flowing water—and yet, he did not smile.</p>
                <p><i>But this fight is far from over.</i></p>
            </article>
        </main>
    </div>
</template>

<script>
export default {
    name:'Detail',
    methods:{
        progression(progressMenu){
            const progressBar = progressMenu.querySelector('div div div')
            window.addEventListener('scroll', () => {
                const scrollPositionArt = this.$refs.article.getBoundingClientRect().top
                const scrollPerc = (scrollPositionArt / (this.$refs.article.clientHeight - (window.innerHeight / 2))) * -100

                if (scrollPositionArt < window.innerHeight / 4) {
                    progressMenu.classList.remove('hidden')
                    progressBar.setAttribute('style', `width:${ scrollPerc > 0 ? scrollPerc : 0 }%`)
                } else {
                    progressMenu.classList.add('hidden')
                }
            })
            
        },
        schemeType(schemeToggle){
            schemeToggle.addEventListener('click', () => {
                if (document.body.classList.contains('dark-scheme')) {
                    document.body.classList.remove('dark-scheme')
                    document.body.classList.add('light-scheme')
                } else {
                    document.body.classList.remove('light-scheme')
                    document.body.classList.add('dark-scheme')
                }
            })
        }
    },
    mounted(){
        this.schemeType(this.$refs.schemeToggle)
        this.progression(this.$refs.progressMenu)
    }
}
</script>

<style lang="scss">
.detail {
    transition: .3s ease all;

    >header {
        min-height: calc(100vh - 5rem);
        overflow: hidden;
        background-image: url('https://thunderchicken.nl/freespace/img/udyr.jpg');
        background-size: cover;
        background-position: center;
        background-attachment: fixed;

        &:after {
            content: "";
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 100%;
            background: linear-gradient(180deg, rgba($color-black--dark, 0) 20%, rgba($color-black--dark, 1) 95%)
        }

        div {
            position: absolute;
            top: initial;
            top: 40%;
            left: 50%;
            text-align: center;
            transform:translate(-50%,-50%);

            h1 {
                font-size: $font-size-xxlarge;
                color: $color-gold--lightest;
                letter-spacing: .05em;
                text-transform: uppercase;
                margin-bottom: .5rem;
                text-shadow: 0px 0px 5px rgba($color-black, .15);
            }

            p {
                color: $color-gold--lighter;
                text-transform: uppercase;
                font-size: $font-size-medium;
                text-shadow: 0px 0px 5px rgba($color-black, .15);
            }
        }

        span {
            position: absolute;
            display: block;
            text-align: center;
            text-transform: uppercase;
            font-size: $font-size-small;
            bottom: 25vh;
            width: 100%;
            z-index: 1;
            color: rgba($color-gold--lightest, .5);

            &:after {
                content: "";
                display: block;
                position: absolute;
                left: 50%;
                bottom: 0;
                transform: translate(-50%, 250%);
                border-top: 10px solid $color-gold;
                border-left: 7px solid transparent;
                border-right: 7px solid transparent;
            }
        }
    }

    .hidden {
        opacity: 0;
        pointer-events: none;
        transform: none;
    }
    main{
        margin-bottom: 4rem;
    }
    header+div {
        position: fixed;
        top: 6rem;
        left: 2rem;
        max-width: 18.75rem;
        transition: .3s ease all;

        &.hidden {
            transform: translateX(-1rem);
        }

        h1,
        span {
            text-transform: uppercase;
            color: $color-gold--lightest;
        }

        h1 {
            margin: .5rem 0;
            line-height: 1;
            font-size: $font-size-mediumX;
        }

        span {
            font-size: $font-size-small;
        }

        p {
            text-transform: uppercase;
            color: $color-gold--lighter;
            font-size: $font-size-small;
        }

        >div {
            width: 100%;
            height: 2px;
            background-color: rgba($color-white, .25);
            margin: 1rem 0;
            overflow: hidden;

            div {
                height: 2px;
                background-color: $color-gold--lighter;
                width: 0%;
            }

        }

        button {
            appearance: none;
            background: transparent;
            border: none;

            svg {
                transition: .3s ease all;
                color: $color-gold--light;
            }
        }
    }

    article {
        color: $color-gold--lightest;
        max-width: 40rem;
        padding: 0 1.875rem;
        margin: auto;

        header {
            position: relative;
            margin-bottom: 7.5rem;

            &:before,
            &:after {
                content: "";
                position: absolute;
                left: 50%;
            }

            &:before {
                height: 6rem;
                border-left: 2px solid $color-gold;
                transform: translate(-1px, -200%);
            }

            &:after {
                height: 1rem;
                width: 1rem;
                top: -4rem;
                border: 2px solid $color-gold;
                background: $color-black;
                transform: translate(-50%, -200%) rotate(45deg);
                transition: .3s ease all;
            }

            h1 {
                text-transform: uppercase;
                color: $color-gold--lightest;
            }

            p {
                text-transform: uppercase;
                color: $color-gold--lighter;
                font-size: $font-size-small;
            }
        }

        p,
        i,
        center {
            font-size: $font-size-medium;
            padding: .625rem 0;
            letter-spacing: -.004em;
        }

        p {
            span {
                display: block;
                width: 100%;
                text-align: center;
            }
        }
    }
}

.light-scheme {
    background-color: $color-white;

    >header {
        &:after {
            background: linear-gradient(180deg, rgba($color-white, 0) 20%, rgba($color-white, 1) 95%)
        }

        span {
            color: $color-black;
        }
    }

    header+div {

        h1,
        span {
            color: $color-black;
        }

        button {
            svg {
                color: $color-gold--dark;
            }
        }

        >div {
            background-color: rgba($color-black, .15);

        }
    }

    article {

        header:after {
            background-color: $color-white;
        }

        header h1,
        p {
            color: $color-black;
        }
    }
}
</style>